var Utils=function(){var f=new Array();var k=new Array();var h=new Array();var a=null;var l=navigator.userAgent.indexOf("Firefox");var e;var c;var b;var g;var d=new Array("mixi.jp","mmall.jp","mixi.at","mplace.jp","mixi.co.jp","www.find-job.net","mreco.jp","mreco0.jp","mixi-nenga.jp");return{IsSAEnabled:function(){if(false==g){var m=window.BubbleHide&&window.MoveBubble&&window.ShowBubble&&window.pop;if(m!=undefined){g=true}}return g},getIframeIndex:function(){for(var m=0;m<window.parent.frames.length;m++){if(window.parent.frames[m]==window){return m}}return -1},sendTelemetry:function(o,n,q,m,p,r){return function(u){var s=true;if(o!=null){s=o()}var t="<d><r>"+n+"</r><a>"+m+"</a><n>"+q+"</n><m>"+p+"</m><b>"+r+"</b></d>";chrome.runtime.sendMessage({method:"LinkClickTelemetry",telemetryData:t});return s}},ResetSAEnabled:function(){g=false},getSAProtocol:function(){var m;if(l!=-1){m=new RegExp(/chrome:\/\/saff\/content/)}else{m=new RegExp(/^(sacore:|siteadvisor:)/)}return m},getSADetectInterval:function(){var m=100;return m},getSADetectCnt:function(){var m=30;return m},LTrim:function(n){for(var m=0;m<n.length&&(n.charAt(m)<=" "||n.charAt(m)>"\177");m++){}return n.substring(m,n.length)},RTrim:function(n){for(var m=n.length-1;m>=0&&n.charAt(m)<=" ";m--){}return n.substring(0,m+1)},Trim:function(m){return this.LTrim(this.RTrim(m))},getFormatLink:function(m){var n=m;if(!n.match("^http")){var o=n.indexOf("-");if(o==0||(l!=-1&&o==1)){n=n.slice(o+1)}n=this.Trim(n);if(!n.match("^http")){n="http://"+n}}return n},getSearchText:function(){return f},getSearchNodes:function(){return k},getSearchFlags:function(){return h},clearAll:function(m){var n=f.length;f=[];k=[];h=[];if(m||n>0){document.sbReParse()}return true},execSearchQuery:function(n,m){if(typeof n=="undefined"){return false}if(typeof m=="undefined"){m="normal"}e=document.evaluate(n,document,null,0,null);while(c=e.iterateNext()){b=c;f.push(b.href);k.push(b);h.push(m)}return true},excludeMixiDomain:function(m){for(x in d){if(-1!=m.indexOf(d[x])){return false}}return true},execMixiSearchQuery:function(p,o){if(typeof p=="undefined"){return false}if(typeof o=="undefined"){o="normal"}e=document.evaluate(p,document,null,0,null);while(c=e.iterateNext()){b=c;if(-1!=b.href.indexOf("redirect_page")){var n=b.href.split("&")[1].split("=")[1];if(this.excludeMixiDomain(n)){f.push(b.href);k.push(b);h.push(o)}}else{if(this.excludeMixiDomain(b.href)){f.push(b.href);k.push(b);h.push(o)}else{if(-1!=b.href.indexOf("http://mixi.jp/redirect_check.pl")){var m=b.href.split("url=")[1].split("&")[0];if(this.excludeMixiDomain(m)){f.push(m);k.push(b);h.push(o)}}}}}return true},execMixiDirectSearchQuery:function(q,p){if(typeof q=="undefined"){return false}if(!this.execMixiSearchQuery(q,p)){return false}for(var n=0;n<f.length;n++){if(f[n].indexOf("&url=")!=-1){var m=f[n].split("&");var o=m[1].split("=");if(-1==o[1].indexOf("mixi.jp")&&-1==o[1].indexOf("mmall.jp")){f[n]=o[1]}}}return true},execNodeTextQuery:function(r,p,o){var m=new Array();var q=new Array();var n=false;if(typeof r=="undefined"||typeof p=="undefined"){return n}this.GetNodeColl(r,m);if(m.length==0){return n}this.GetTextColl(p,q);if(m.length==q.length){for(i=0;i<m.length;i++){f.push(q[i]);k.push(m[i]);h.push(o)}return true}return n},execNodeTextQueryforBaiduPromotion:function(q,p,n){if(this.execNodeTextQuery(q,p,n)){for(var o=0;o<f.length;o++){if(f[o].indexOf(" ")!=-1){var m=f[o].split(" ");for(j=0;j<m.length;j++){if(m[j]!=""){f[o]=m[j];break}}}}return true}else{return false}},execBaiduPromotionQuery:function(o,n){var m="baidupromotion";if(typeof o!="undefined"&&typeof n=="undefined"){return this.execSearchQuery(o,m)}return this.execNodeTextQueryforBaiduPromotion(o,n,m)},execTopBtmSponsQuery:function(o,n){var m="topbottom";if(typeof o!="undefined"&&typeof n=="undefined"){return this.execSearchQuery(o,m)}return this.execNodeTextQuery(o,n,m)},execRightSponsQuery:function(o,n){var m="right";if(typeof o!="undefined"&&typeof n=="undefined"){return this.execSearchQuery(o,m)}return this.execNodeTextQuery(o,n,"right")},GetNodeColl:function(n,m){e=document.evaluate(n,document,null,0,null);while(c=e.iterateNext()){b=c;m.push(b)}},GetTextColl:function(n,m){e=document.evaluate(n,document,null,0,null);while(c=e.iterateNext()){b=c;m.push(b.innerText||b.textContent)}},executeXPathSponsorAttrRemoveQuery:function(m,n){e=document.evaluate(m,document,null,0,null);while(c=e.iterateNext()){b=c;b.removeAttribute(n)}},getImageSize:function(m){var n=new Object();if(m.toLowerCase().indexOf("ask_")!=-1){n.iWidth=16;n.iHeight=16}else{if(m.toLowerCase().indexOf("nortoncertified")!=-1){n.iWidth=62;n.iHeight=15}else{if(m.toLowerCase().indexOf("nsg_eligible")!=-1){n.iWidth=116;n.iHeight=18}else{if(m.toLowerCase().indexOf("shop")==-1){n.iWidth=46;n.iHeight=15}else{n.iWidth=65;n.iHeight=15}}}}return n},createImage:function(m,p){response=document.createElement("img");response.className="l sb-l";var n=Shasta.getLinkSrcImg(m);if(p&&(p==true)){n="ask_"+n}var r="images/SafeBrowse/"+n;response.src=chrome.extension.getURL(r);response.id=Shasta.getLinkId(m);response.style.padding="0px";response.style.border="none";response.style.textDecoration="none";response.style.cssText="position:relative; *position:static; *zoom:1;";response.style.top="2px";response.style.cursor="pointer";if(response.width>0){response.style.width=response.width+"px";response.style.height=response.height+"px"}else{var o=this.getImageSize(n);response.style.width=o.iWidth+"px";response.style.height=o.iHeight+"px"}if(l!=-1){response.setAttribute("onmouseover","coShasta(this, Shasta.getFrameId(), Utils.getMouseOffset(event,this))");response.setAttribute("onmouseup","coShastaMouseUp(this, Shasta.getFrameId(), event.button)");response.addEventListener("DOMMouseScroll",function q(){coShastaScroll(this,Shasta.getFrameId())},false)}else{response.removeAttribute("width");response.removeAttribute("height");if(this.IsIEQuirkMode()){response.setAttribute("onmouseover",function(){coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))})}else{if(this.IsIEDocumentMode8OrBetter()){response.onmouseover=function(){Utils.coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))}}else{response.onmouseover=function(){this.coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))}}}response.onmouseup=function(){Utils.coShastaMouseUp(this,Shasta.getFrameId(),event.button)};response.onmousewheel=function(){Utils.coShastaScroll(this,Shasta.getFrameId())}}return response},createNsgImage:function(m){response=document.createElement("img");response.className="l sb-l";var n=Shasta.getLinkNsgImage(m);if(typeof n=="undefined"){return}var q="images/NSG/"+n;response.src=chrome.extension.getURL(q);response.id=Shasta.getNSGLinkId(m);response.style.padding="0px";response.style.border="none";response.style.textDecoration="none";response.style.cssText="position:relative; *position:static; *zoom:1;";response.style.top="2px";response.style.cursor="pointer";if(response.width>0){response.style.width=response.width+"px";response.style.height=response.height+"px"}else{var o=this.getImageSize(n);response.style.width=o.iWidth+"px";response.style.height=o.iHeight+"px"}if(l!=-1){response.setAttribute("onmouseover","coShasta(this, Shasta.getFrameId(), Utils.getMouseOffset(event,this))");response.setAttribute("onmouseup","coShastaMouseUp(this, Shasta.getFrameId(), event.button)");response.addEventListener("DOMMouseScroll",function p(){coShastaScroll(this,Shasta.getFrameId())},false)}else{response.removeAttribute("width");response.removeAttribute("height");if(this.IsIEQuirkMode()){response.setAttribute("onmouseover",function(){coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))})}else{if(this.IsIEDocumentMode8OrBetter()){response.onmouseover=function(){Utils.coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))}}else{response.onmouseover=function(){this.coShasta(this,Shasta.getFrameId(),Utils.getMouseOffset(event,this))}}}response.onmouseup=function(){Utils.coShastaMouseUp(this,Shasta.getFrameId(),event.button)};response.onmousewheel=function(){Utils.coShastaScroll(this,Shasta.getFrameId())}}return response},getMouseOffset:function(o,n){if((typeof o=="undefined")||(typeof n=="undefined")){return"-1,-1"}var m="";if(l!=-1){m=o.layerX+","+o.layerY}else{m=o.offsetX+","+o.offsetY}return m},IsIEDocumentMode8OrBetter:function(){if(a!=null){return !a}a=false;if(navigator.userAgent.search(/MSIE [67]/)!=-1){a=true;return !a}var n=document.getElementsByTagName("meta");for(var m=0;m<n.length;m++){if(n[m].httpEquiv.search("X-UA-Compatible")!=-1){if(n[m].content=="IE=7"){a=true;break}}}if(!a&&document.documentMode==7){a=true}return !a},IsIEQuirkMode:function(){return(document.documentMode==5&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)))},coShasta:function(o,m,q){var p=new Object();var n=[];p.collectionIndex=0;p.prop=$(o).getElementProperties();n.push(p);SendMessageToNativeHost({method:"coShasta",windowId:_windowId,tabId:_tabId,frameId:m,collectionData:n,offset:q})},coShastaMouseUp:function(p,n,m){var q=new Object();var o=[];q.collectionIndex=0;q.prop=$(p).getElementProperties();o.push(q);SendMessageToNativeHost({method:"coShastaMouseUp",windowId:_windowId,tabId:_tabId,frameId:n,button:m,collectionData:o})},coShastaScroll:function(n,m){SendMessageToNativeHost({method:"coShastaScroll",windowId:_windowId,tabId:_tabId})}}}();